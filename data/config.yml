tls:
  stores:
    default:
      defaultCertificate:
        certFile: /etc/traefik/certs/fullchain.pem
        keyFile: /etc/traefik/certs/privkey.pem

http:

  routers:

    dashboard:
      rule: Host(`traefik-dashboard.nuc10i7fnh.home.arpa`) && (PathPrefix(`/api`) || PathPrefix(`/dashboard`))
      service: api@internal
      middlewares:
        - https-redirectscheme
        - default-whitelist
      entryPoints:
        - "https"
      tls: {}


  middlewares:
    https-redirectscheme:
      redirectScheme:
        scheme: https
        permanent: true

    default-whitelist:
      ipWhiteList:
        sourceRange:
        - "192.168.0.0/16"

    secured:
      chain:
        middlewares:
        - default-whitelist
        - default-headers
